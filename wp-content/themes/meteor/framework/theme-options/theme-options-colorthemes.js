(function(e){function l(t,n){e.post("admin-ajax.php?action=theme_options_misc",{context:"update-color-theme-css",css:t},function(e){e.success?n instanceof Function&&n():f.log(e)},"json")}function c(t,i){if(n){var s=n.render(t);r.parse(s,function(e,t){e?f.log(e):i(unescape(encodeURIComponent(t.toCSS({compress:!0}))))})}else{var o=document.WP_THEME_URI+"/core/js/data/"+document.WP_THEME_ID+"-css.mustache.txt?ver="+document.WP_THEME_VERSION;e.get(o,function(e){n=Hogan.compile(e),r=new less.Parser,c(t,i)})}}function h(e){var t={};for(var n,r,i=0,s=e.length;i<s;i++){r=e[i];if(r.value){n=r.name.split("[").pop().split("]").shift();if(n==="_wp_http_referer")continue;t[n]=r.value}}return t}var t=e(document),n=null,r=null,i="theme-options:before-save",s="theme-options:rebuild-color-theme",o="theme-options:reload-options-page",u=/\?page=color-editor/i,a=null,f=window.console||{log:function(){}};t.ready(function(){var n=document.WP_THEME_ID+"_rebuild_colortheme";wpCookies.get(n)&&e.post("admin-ajax.php?action=theme_options_misc",{context:"get-color-theme-data"},function(r){r.data?t.trigger(s,[e.param({key:r.data}),function(){f.log("Color theme stylesheet updated"),wpCookies.remove(n)}]):f.log(r)},"json")}),t.on(o,function(){window.location="admin.php?page=theme-options"}),t.on("theme-options:sync-color-theme-data",function(e,t){}),t.on(i,function(t,n){u.test(window.location)&&(n=h(n),c(n,function(t){t="/* Generated on "+(new Date).toGMTString()+" */\n"+t,t=e.base64.encode(t),a=t}))}),t.on(s,function(e,t,n){var r=setInterval(function(){a&&(clearInterval(r),l(a,n),a=null)},10)})})(jQuery);